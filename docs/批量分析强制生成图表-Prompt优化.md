# æ‰¹é‡åˆ†æå¼ºåˆ¶ç”Ÿæˆå›¾è¡¨ - Promptä¼˜åŒ–

## ğŸ“‹ é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆæ‰¹é‡åˆ†æä¸­æŸäº›Sheetæ²¡æœ‰ç”Ÿæˆå›¾è¡¨ï¼š
- âŒ Sheet 3 (æ–°æ‰‹æ¼æ–—) - æ²¡æœ‰å›¾è¡¨
- âŒ Sheet 4 (æ–°æ‰‹æ¼æ–—å…³é”®èŠ‚ç‚¹) - æ²¡æœ‰å›¾è¡¨
- âŒ Sheet 6 (æµå¤±ç”¨æˆ·å±æ€§) - æ²¡æœ‰å›¾è¡¨

## ğŸ” åŸå› åˆ†æ

é€šè¿‡æ£€æŸ¥æ•°æ®åº“å‘ç°ï¼š
- æŠ¥å‘Šå·²æˆåŠŸç”Ÿæˆï¼Œä½†éƒ¨åˆ†Sheetçš„`html_charts`å­—æ®µä¸ºç©º
- è¿™æ˜¯å› ä¸ºåŸå§‹Promptä¸­**æ²¡æœ‰æ˜ç¡®è¦æ±‚ç”Ÿæˆå›¾è¡¨**
- AIæ ¹æ®æ•°æ®ç‰¹ç‚¹è‡ªè¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦å›¾è¡¨ï¼Œå¯¼è‡´æŸäº›Sheetæ²¡æœ‰ç”Ÿæˆå›¾è¡¨

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹Promptæ¨¡æ¿

åœ¨æ¯ä¸ªSheetçš„Promptæ¨¡æ¿ä¸­æ·»åŠ å¼ºåˆ¶è¦æ±‚ï¼š

```
ã€é‡è¦ã€‘å¿…é¡»ç”Ÿæˆè‡³å°‘ä¸€ä¸ªå¯è§†åŒ–å›¾è¡¨ï¼ˆå¦‚XXXå›¾ã€XXXå›¾ç­‰ï¼‰æ¥å±•ç¤ºXXXï¼Œå›¾è¡¨å¿…é¡»ä½¿ç”¨å®Œæ•´çš„HTMLæ ¼å¼ï¼ˆåŒ…å«echartsåº“çš„å®Œæ•´ä»£ç ï¼‰ã€‚
```

### ä¿®æ”¹å†…å®¹

**æ–‡ä»¶ï¼š** `backend/app/services/bailian_service.py`

**ä¿®æ”¹å‰ï¼š**
```python
# Sheet 1: æ–°æ‰‹æ¼æ–—
"""ä½ æ˜¯ä¸€ä¸ªæ´å¯Ÿèƒ½åŠ›æå¼ºçš„æ¸¸æˆå…¬å¸çš„æ•°æ®åˆ†æä¸“å®¶...å½¢æˆå®Œæ•´çš„è¿è¥åˆ†ææŠ¥å‘Š"""
```

**ä¿®æ”¹åï¼š**
```python
# Sheet 1: æ–°æ‰‹æ¼æ–—
"""ä½ æ˜¯ä¸€ä¸ªæ´å¯Ÿèƒ½åŠ›æå¼ºçš„æ¸¸æˆå…¬å¸çš„æ•°æ®åˆ†æä¸“å®¶...å½¢æˆå®Œæ•´çš„è¿è¥åˆ†ææŠ¥å‘Šã€‚

ã€é‡è¦ã€‘å¿…é¡»ç”Ÿæˆè‡³å°‘ä¸€ä¸ªå¯è§†åŒ–å›¾è¡¨ï¼ˆå¦‚æ¼æ–—å›¾ã€æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ç­‰ï¼‰æ¥å±•ç¤ºæ–°æ‰‹è½¬åŒ–æµç¨‹æˆ–ç•™å­˜è¶‹åŠ¿ï¼Œå›¾è¡¨å¿…é¡»ä½¿ç”¨å®Œæ•´çš„HTMLæ ¼å¼ï¼ˆåŒ…å«echartsåº“çš„å®Œæ•´ä»£ç ï¼‰ã€‚"""
```

### æ‰€æœ‰Sheetçš„å›¾è¡¨è¦æ±‚

| Sheetç´¢å¼• | Sheetåç§° | æ¨èå›¾è¡¨ç±»å‹ | å±•ç¤ºå†…å®¹ |
|----------|----------|------------|---------|
| 0 | æœ€åæ“ä½œåˆ†å¸ƒ | æŸ±çŠ¶å›¾ã€é¥¼å›¾ | TOP10é«˜é¢‘ç‡è¡Œä¸º |
| 1 | æ–°æ‰‹æ¼æ–— | æ¼æ–—å›¾ã€æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ | æ–°æ‰‹è½¬åŒ–æµç¨‹æˆ–ç•™å­˜è¶‹åŠ¿ |
| 2 | å›æµç”¨æˆ· | æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¢ç§¯å›¾ | å›æµç”¨æˆ·æ•°é‡å˜åŒ–è¶‹åŠ¿æˆ–ç•™å­˜è´¨é‡å¯¹æ¯” |
| 3 | æµå¤±ç”¨æˆ·å±æ€§ | é¥¼å›¾ã€æŸ±çŠ¶å›¾ã€å †å æŸ±çŠ¶å›¾ | æµå¤±ç”¨æˆ·VIPç­‰çº§åˆ†å¸ƒæˆ–æµå¤±ç­‰çº§åˆ†å¸ƒ |
| 4 | ç•™å­˜ç‡ | æŠ˜çº¿å›¾ã€å¯¹æ¯”æŸ±çŠ¶å›¾ | newç”¨æˆ·å’Œrollç”¨æˆ·çš„ç•™å­˜ç‡å¯¹æ¯”è¶‹åŠ¿ |
| 5 | LTV | æŠ˜çº¿å›¾ã€å¯¹æ¯”æŸ±çŠ¶å›¾ã€é¢ç§¯å›¾ | newç”¨æˆ·å’Œrollç”¨æˆ·çš„LTVå¯¹æ¯”è¶‹åŠ¿ |

## ğŸ¯ é¢„æœŸæ•ˆæœ

ä¿®æ”¹åï¼Œæ‰€æœ‰Sheetéƒ½å°†ï¼š
1. âœ… å¼ºåˆ¶ç”Ÿæˆè‡³å°‘ä¸€ä¸ªå¯è§†åŒ–å›¾è¡¨
2. âœ… å›¾è¡¨ä½¿ç”¨å®Œæ•´çš„HTMLæ ¼å¼ï¼ˆåŒ…å«echartsåº“ï¼‰
3. âœ… å›¾è¡¨ç±»å‹æ ¹æ®æ•°æ®ç‰¹ç‚¹è‡ªåŠ¨é€‰æ‹©ï¼ˆAIåœ¨æ¨èèŒƒå›´å†…é€‰æ‹©ï¼‰
4. âœ… å›¾è¡¨å±•ç¤ºå…³é”®æ•°æ®è¶‹åŠ¿æˆ–åˆ†å¸ƒ

## ğŸ“ æµ‹è¯•æ­¥éª¤

1. **é‡å¯åç«¯æœåŠ¡**ï¼ˆè®©Promptä¿®æ”¹ç”Ÿæ•ˆï¼‰
   ```bash
   # å¦‚æœä½¿ç”¨æœ¬åœ°æ¨¡å¼
   # åœ¨åç«¯ç»ˆç«¯æŒ‰ Ctrl+Cï¼Œç„¶åé‡æ–°è¿è¡Œ
   cd backend
   .\start_local.bat
   ```

2. **ä¸Šä¼ æ–°çš„Excelæ–‡ä»¶**
   - è®¿é—®æ‰¹é‡åˆ†æé¡µé¢
   - ä¸Šä¼ åŒ…å«å¤šä¸ªSheetçš„Excelæ–‡ä»¶
   - è¾“å…¥åˆ†æéœ€æ±‚
   - ç‚¹å‡»"æäº¤ç”ŸæˆæŠ¥å‘Š"

3. **éªŒè¯å›¾è¡¨ç”Ÿæˆ**
   - ç­‰å¾…æ‰€æœ‰Sheetåˆ†æå®Œæˆ
   - é€ä¸ªæŸ¥çœ‹æ¯ä¸ªSheetçš„æŠ¥å‘Š
   - ç¡®è®¤æ¯ä¸ªSheetéƒ½æœ‰å›¾è¡¨æ˜¾ç¤º
   - ç‚¹å‡»"æŸ¥çœ‹å›¾è¡¨è¯¦æƒ…"éªŒè¯å›¾è¡¨å¯ä»¥æ­£å¸¸æ‰“å¼€

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **åªå½±å“æ–°ç”Ÿæˆçš„æŠ¥å‘Š**
   - å·²ç»ç”Ÿæˆçš„æŠ¥å‘Šä¸ä¼šè‡ªåŠ¨æ›´æ–°
   - éœ€è¦é‡æ–°ä¸Šä¼ æ–‡ä»¶å¹¶ç”Ÿæˆæ–°æŠ¥å‘Š

2. **AIä»æœ‰ä¸€å®šè‡ªä¸»æ€§**
   - è™½ç„¶å¼ºåˆ¶è¦æ±‚ç”Ÿæˆå›¾è¡¨ï¼Œä½†AIä¼šæ ¹æ®æ•°æ®ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹
   - å¦‚æœæ•°æ®ç¡®å®ä¸é€‚åˆå¯è§†åŒ–ï¼ŒAIå¯èƒ½ç”Ÿæˆç®€å•çš„ç»Ÿè®¡å›¾è¡¨

3. **å›¾è¡¨è´¨é‡å–å†³äºæ•°æ®è´¨é‡**
   - æ•°æ®è¶Šå®Œæ•´ã€è¶Šè§„èŒƒï¼Œç”Ÿæˆçš„å›¾è¡¨è¶Šå‡†ç¡®
   - æ•°æ®ç¼ºå¤±æˆ–æ ¼å¼ä¸è§„èŒƒå¯èƒ½å½±å“å›¾è¡¨æ•ˆæœ

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœä¿®æ”¹åæ•ˆæœä¸ç†æƒ³ï¼Œå¯ä»¥å›æ»šåˆ°åŸå§‹Promptï¼š

```python
# åˆ é™¤æ¯ä¸ªPromptæœ«å°¾çš„ã€é‡è¦ã€‘æ®µè½å³å¯
```

## ğŸ“Š æ•°æ®åº“éªŒè¯

å¯ä»¥é€šè¿‡ä»¥ä¸‹SQLæŸ¥è¯¢éªŒè¯å›¾è¡¨ç”Ÿæˆæƒ…å†µï¼š

```sql
-- æŸ¥çœ‹æ‰€æœ‰Sheetçš„å›¾è¡¨ç”ŸæˆçŠ¶æ€
SELECT 
    id, 
    sheet_name, 
    (report_content->>'html_charts') IS NOT NULL as has_html_charts,
    LENGTH(report_content->>'html_charts') as chart_length
FROM sheet_reports 
WHERE batch_session_id = [ä½ çš„session_id]
ORDER BY id;
```

é¢„æœŸç»“æœï¼šæ‰€æœ‰Sheetçš„`has_html_charts`éƒ½åº”è¯¥æ˜¯`t`ï¼ˆtrueï¼‰

---

**ä¿®æ”¹æ—¶é—´ï¼š** 2025-12-26  
**ä¿®æ”¹äººï¼š** Kiro AI Assistant  
**å½±å“èŒƒå›´ï¼š** å®šåˆ¶åŒ–æ‰¹é‡åˆ†æçš„æ‰€æœ‰Sheet  
**ç”Ÿæ•ˆæ–¹å¼ï¼š** é‡å¯åç«¯æœåŠ¡åå¯¹æ–°ç”Ÿæˆçš„æŠ¥å‘Šç”Ÿæ•ˆ
