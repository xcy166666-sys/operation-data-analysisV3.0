# 版本历史查看功能 - 使用说明

## 🎯 功能简介

版本历史查看功能让您可以：
- 📋 查看会话的所有历史版本
- 🔄 在不同版本之间快速切换
- 📊 对比不同版本的报告内容
- ⏮️ 随时返回当前版本

---

## 🚀 快速开始

### 1. 打开版本面板

在左侧会话列表中，找到您想查看历史版本的会话，点击右侧的 **📄 图标**：

```
┌─────────────────────────────────────┐
│ 📄 LTV - 副本 (2)                    │
│    今天                    [📄] ←点这里│
│    进行中                            │
└─────────────────────────────────────┘
```

版本面板会平滑展开，显示该会话的所有历史版本。

---

### 2. 查看版本列表

版本面板展开后，您会看到：

```
┌─────────────────────────────────────┐
│ 📌 版本历史 (2个版本)               │
├─────────────────────────────────────┤
│ V2 - 添加了新的分析章节              │
│ 2分钟前                    [当前]   │  ← 当前版本（绿色标签）
├─────────────────────────────────────┤
│ V1 - 初始版本                       │
│ 10分钟前                            │  ← 历史版本
└─────────────────────────────────────┘
```

**版本信息说明：**
- **版本号**：V1, V2, V3...（自动递增）
- **版本说明**：保存版本时输入的说明文字
- **时间**：版本创建时间（相对时间或绝对时间）
- **标签**：
  - `[当前]` - 绿色标签，表示这是会话的最新版本
  - `[查看中]` - 灰色标签，表示正在查看这个历史版本

---

### 3. 切换到历史版本

点击任意历史版本（例如 V1），系统会：

1. **显示加载提示**：
   ```
   💬 正在加载版本 V1...
   ```

2. **切换报告内容**：
   右侧主内容区会显示该版本的完整报告（包括文字和图表）

3. **显示版本提示条**：
   页面顶部会出现蓝色提示条：
   ```
   ┌──────────────────────────────────────────────────────────┐
   │ ℹ️ 正在查看历史版本 V1 - 初始版本 (10分钟前)  [返回当前版本] │
   └──────────────────────────────────────────────────────────┘
   ```

4. **显示成功消息**：
   ```
   ✅ 已切换到版本 V1
   ```

---

### 4. 返回当前版本

查看历史版本后，如果想返回最新版本，有两种方式：

#### 方式1：点击版本提示条中的按钮
点击蓝色提示条中的 **[返回当前版本]** 按钮

#### 方式2：在版本列表中点击当前版本
在左侧版本面板中，点击带有 `[当前]` 标签的版本

**返回后：**
- ✅ 报告内容恢复为最新版本
- ✅ 版本提示条消失
- ✅ 显示成功消息："已返回当前版本"

---

## 💡 使用技巧

### 技巧1：快速对比版本
1. 打开版本面板
2. 点击历史版本查看
3. 记住关键内容
4. 返回当前版本对比

### 技巧2：保存重要节点
在报告编辑过程中，遇到重要节点时：
1. 点击右上角 **[保存版本]** 按钮
2. 输入有意义的版本说明（例如："添加了用户留存分析"）
3. 保存后可以随时回溯

### 技巧3：版本命名规范
建议使用清晰的版本说明，例如：
- ✅ "添加了新手留存分析章节"
- ✅ "修正了收入数据错误"
- ✅ "优化了图表展示"
- ❌ "版本2"（不够清晰）
- ❌ "修改"（太模糊）

### 技巧4：定期清理旧版本
如果版本过多，可以：
1. 保留重要的里程碑版本
2. 删除不需要的中间版本（功能开发中）
3. 为重要版本添加标签（功能开发中）

---

## 🎨 界面说明

### 版本面板布局

```
┌─────────────────────────────────────┐
│ 📌 版本历史 (2个版本)    [🔄] [×]   │  ← 标题栏（刷新/关闭按钮）
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ V2 - 添加了新的分析章节          │ │  ← 版本项
│ │ 2分钟前              [当前]     │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ V1 - 初始版本                   │ │
│ │ 10分钟前                        │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### 版本提示条布局

```
┌──────────────────────────────────────────────────────────┐
│ ℹ️ 正在查看历史版本 V1 - 初始版本 (10分钟前)  [返回当前版本] │
└──────────────────────────────────────────────────────────┘
    ↑                ↑        ↑           ↑            ↑
  图标            版本号    说明        时间         按钮
```

### 交互状态

| 状态 | 视觉效果 |
|------|---------|
| 默认 | 灰色背景 |
| 悬停 | 浅蓝色背景，显示"点击查看"提示 |
| 当前版本 | 蓝色边框 + 绿色"[当前]"标签 |
| 查看中 | 灰色"[查看中]"标签 |
| 加载中 | 旋转图标 + "正在加载版本..." |

---

## ⚠️ 注意事项

### 1. 版本内容是只读的
- 查看历史版本时，报告内容是只读的
- 如果想基于历史版本继续编辑，需要先返回当前版本

### 2. 对话历史不会切换
- 切换到历史版本时，只会切换报告内容
- AI对话历史不会改变
- 如果想基于历史版本继续对话，建议先返回当前版本

### 3. 版本保存时机
- 系统不会自动保存版本
- 需要手动点击"保存版本"按钮
- 建议在重要节点及时保存

### 4. 版本数量限制
- 目前没有版本数量限制
- 但建议定期清理不需要的版本
- 保持版本列表简洁清晰

---

## 🔧 常见问题

### Q1：为什么看不到版本面板？
**A：** 可能的原因：
1. 会话还没有保存任何版本
2. 版本面板被折叠了，点击 📄 图标展开
3. 网络问题导致版本列表加载失败

**解决方法：**
- 先保存一个版本，然后再查看
- 检查网络连接
- 刷新页面重试

---

### Q2：切换版本后，图表显示不正常？
**A：** 可能的原因：
1. 历史版本的图表数据格式不同
2. 浏览器缓存问题

**解决方法：**
- 刷新页面
- 清除浏览器缓存
- 返回当前版本再重新查看

---

### Q3：版本说明可以修改吗？
**A：** 目前版本说明在保存后不能修改。建议：
- 保存时仔细填写说明
- 使用清晰、有意义的描述
- 版本重命名功能正在开发中

---

### Q4：可以删除不需要的版本吗？
**A：** 版本删除功能正在开发中。目前建议：
- 保存版本时谨慎选择
- 只保存重要的里程碑版本
- 避免创建过多不必要的版本

---

### Q5：版本之间可以对比吗？
**A：** 版本对比功能正在开发中。目前可以：
- 手动切换版本查看
- 记录关键差异
- 使用截图工具辅助对比

---

## 📚 相关文档

- [版本历史查看功能-交互设计方案](./版本历史查看功能-交互设计方案.md) - 详细的设计文档
- [版本历史查看功能-测试指南](./版本历史查看功能-测试指南.md) - 完整的测试步骤
- [保存版本功能-快速测试](./保存版本功能-快速测试.md) - 如何保存版本
- [报告版本历史功能-完整实施总结](./报告版本历史功能-完整实施总结.md) - 功能实现总结

---

## 🎉 开始使用

现在您已经了解了版本历史查看功能的使用方法，快去试试吧！

**推荐工作流程：**
1. 📝 创建新会话，上传数据
2. 🤖 生成初始报告
3. 💾 保存为 V1（"初始版本"）
4. ✏️ 使用AI对话优化报告
5. 💾 保存为 V2（"优化后的版本"）
6. 🔄 随时在版本之间切换查看
7. ⏮️ 需要时返回当前版本继续编辑

祝您使用愉快！ 🎊
