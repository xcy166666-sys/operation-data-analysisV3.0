# 项目运行状态

## ✅ 服务状态

项目已成功启动，所有服务正在运行：

| 服务 | 状态 | 端口 | 说明 |
|------|------|------|------|
| **后端 (Backend)** | ✅ 运行中 | 21810 | FastAPI服务 |
| **前端 (Frontend)** | ✅ 运行中 | 20810 | Vue3前端 |
| **Nginx** | ✅ 运行中 | 8080/8443 | 反向代理 |
| **PostgreSQL** | ✅ 健康 | 22810 | 数据库 |
| **Redis** | ✅ 健康 | 22811 | 缓存 |

## 🌐 访问地址

### 前端访问
- **本地访问**: http://localhost:20810
- **Nginx代理**: http://localhost:8080

### 后端API
- **API地址**: http://localhost:21810
- **API文档**: http://localhost:21810/docs
- **健康检查**: http://localhost:21810/health

## 📋 配置检查

### 已配置项
- ✅ 数据库连接正常
- ✅ Redis连接正常
- ✅ 后端服务启动成功
- ✅ 中文字体已注册

### 需要配置的项
- ⚠️ **DASHSCOPE_API_KEY**: 需要在 `.env` 文件中配置
  - 当前API密钥: `sk-f72852ce679f42019f669589a51e2639`
  - 模型: `qwen-3-32b`

## 🔧 配置API密钥

在项目根目录的 `.env` 文件中添加：

```env
DASHSCOPE_API_KEY=sk-f72852ce679f42019f669589a51e2639
DASHSCOPE_MODEL=qwen-3-32b
```

配置完成后，重启后端服务：

```bash
docker-compose restart backend
```

## 📝 使用说明

1. **访问前端**: 打开浏览器访问 http://localhost:20810
2. **登录系统**: 使用默认管理员账号登录
   - 用户名: `admin`
   - 密码: `admin123!`
3. **上传Excel文件**: 在"数据分析"页面上传Excel文件
4. **提交分析需求**: 输入分析需求，系统会：
   - 调用阿里百炼API生成图表配置
   - 调用Dify工作流生成文字报告
   - 合并生成完整报告

## 🔍 查看日志

### 查看所有服务日志
```bash
docker-compose logs -f
```

### 查看后端日志
```bash
docker-compose logs backend -f
```

### 查看最近100行日志
```bash
docker-compose logs backend --tail 100
```

## ⚠️ 常见问题

### 1. 后端服务未启动
```bash
# 检查日志
docker-compose logs backend

# 重启服务
docker-compose restart backend
```

### 2. 图表生成失败
- 检查 `.env` 文件中的 `DASHSCOPE_API_KEY` 是否配置
- 检查API密钥是否有效
- 查看后端日志了解详细错误

### 3. 数据库连接失败
```bash
# 检查数据库状态
docker-compose ps postgres

# 重启数据库
docker-compose restart postgres
```

## 🎯 下一步

1. ✅ 项目已启动
2. ⚠️ 配置API密钥（如未配置）
3. 🧪 测试功能：上传Excel文件并生成报告
4. 📊 查看生成的报告（包含图表和文字）

---

**最后更新**: 2025-12-04  
**项目版本**: v2.0


