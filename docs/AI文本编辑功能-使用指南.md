# AI文本编辑功能使用指南

## 功能概述

系统集成了强大的AI文本编辑功能，通过左侧的**AI对话助手**面板，你可以轻松修改报告中的任何文字内容。

### 核心功能 ✨
- **选中文字引用** - 选中报告中的任何文字，自动引用到对话框
- **快捷指令** - 一键润色、简化、扩写、改写
- **AI对话修改** - 自然语言描述任何修改需求
- **上下文理解** - AI会理解选中文字的上下文，确保修改连贯

---

## 使用方法

### 步骤1：选中文字
在报告的文字内容区域，用鼠标选中你想要修改的文字。

### 步骤2：查看引用
选中后，左侧AI对话面板会自动显示：
- **已选中文字**区域（蓝色背景）
- 显示你选中的文字内容
- 提供快捷指令按钮

### 步骤3：选择修改方式

#### 方式A：使用快捷指令（推荐）
点击快捷指令按钮，系统会自动填充指令到输入框：
- **润色** - 让文字更专业、流畅
- **简化** - 简化复杂的表达
- **扩写** - 扩展内容，增加细节
- **改写** - 用不同方式表达相同意思

#### 方式B：自定义指令
在输入框中输入你的修改需求，例如：
- "翻译成英文"
- "改成口语化表达"
- "添加数据支撑"
- "突出重点"
- "改为疑问句"

### 步骤4：发送并等待
点击"发送"按钮或按Enter键，AI会：
1. 显示"AI正在思考..."（可展开查看思考过程）
2. 分析你的指令和选中的文字
3. 理解上下文
4. 生成修改后的内容

### 步骤5：查看结果
AI会自动将修改后的文字更新到报告中，你可以：
- 查看修改后的效果
- 如果不满意，可以重新选中再次修改
- 继续选中其他文字进行修改

---

## 使用示例

### 示例1：润色报告结论
```
1. 选中文字：VIP用户的rmb_ltv比较高
2. 点击"润色"按钮
3. AI返回：VIP等级用户的生命周期价值（LTV）显著高于其他用户群体
4. 报告自动更新
```

### 示例2：简化复杂表达
```
1. 选中文字：在深度分析部分，需要比较不同用户类型（新角色、转角色）在不同VIP等级的表现...
2. 点击"简化"按钮
3. AI返回：需要对比新用户和转化用户在各VIP等级的表现差异
4. 报告自动更新
```

### 示例3：扩写分析建议
```
1. 选中文字：建议优化新手引导
2. 点击"扩写"按钮
3. AI返回：建议优化新手引导流程，包括：
   - 简化注册步骤，减少用户流失
   - 增加互动教程，提升用户理解
   - 提供新手奖励，激励用户留存
4. 报告自动更新
```

### 示例4：自定义修改
```
1. 选中文字：用户活跃度呈下降趋势
2. 输入指令：改成积极的表达方式
3. AI返回：用户活跃度存在提升空间，建议采取激励措施
4. 报告自动更新
```

---

## 界面说明

### AI对话助手面板（左侧）

#### 顶部区域
- **标题**：💬 AI 对话助手
- **状态指示**：在线/离线
- **操作按钮**：
  - 刷新历史
  - 清除历史
  - 退出编辑

#### 中间区域（消息列表）
- 显示对话历史
- 用户消息（蓝色气泡，右侧）
- AI回复（灰色气泡，左侧）
- 引用的文字会显示在消息上方

#### 底部区域
- **已选中文字**（蓝色背景区域）
  - 显示当前选中的文字
  - 点击 ✕ 可清除选择
- **快捷指令**（4个按钮）
  - 润色、简化、扩写、改写
- **输入框**
  - 输入自定义指令
  - 支持多行输入（Shift+Enter换行）
- **发送按钮**
  - 点击发送或按Enter键

---

## 技术特点

### 智能上下文理解
- 系统会自动提取选中文字的前后500字符作为上下文
- AI能够理解文字在整个报告中的位置和作用
- 确保修改后的内容与上下文保持连贯

### 快速响应
- 只发送必要的内容（约1200字符）
- 避免了发送完整报告导致的超时问题
- 响应时间通常为5-15秒

### 精准修改
- 用户明确指定修改位置
- AI只修改选中的部分
- 自动更新到报告中

### 对话历史
- 保存所有对话记录
- 可以查看之前的修改
- 支持清除历史

---

## 注意事项

### 选择文字
1. **选择合适的长度**
   - 建议选择50-500字符
   - 太短可能缺少上下文
   - 太长可能处理时间较长

2. **选择完整的句子或段落**
   - 避免选择半句话
   - 确保语义完整

### 修改指令
1. **清晰具体**
   - 指令越具体，效果越好
   - 例如："改成正式的商务语言"比"改一下"更好

2. **一次一个任务**
   - 建议每次只提一个修改需求
   - 复杂修改可以分多次进行

### 检查结果
1. **仔细检查**
   - AI修改后请仔细检查
   - 确保内容准确性
   - 确保数据没有错误

2. **多次迭代**
   - 如果不满意可以重新修改
   - 可以基于修改后的内容继续优化

---

## 常见问题

### Q1: 为什么选中文字后没有反应？
**A:** 请确保：
- 选中的是报告文字区域的内容
- 选中的文字不为空
- 左侧AI对话面板已打开
- 查看"已选中文字"区域是否显示

### Q2: AI处理时间过长怎么办？
**A:** 
- 正常处理时间为5-15秒
- 如果超过30秒，可以刷新页面重试
- 检查网络连接是否正常
- 查看是否有错误提示

### Q3: 修改后的内容不满意怎么办？
**A:** 
- 可以重新选中相同的文字
- 使用不同的指令再次修改
- 或者手动编辑修改后的内容

### Q4: 可以同时修改多处文字吗？
**A:** 
- 目前只支持单次修改一处
- 建议逐个修改，确保每次修改的质量
- 可以连续进行多次修改

### Q5: 如何清除选中的文字？
**A:** 
- 点击"已选中文字"区域右上角的 ✕ 按钮
- 或者选中其他文字会自动替换

### Q6: 对话历史会保存吗？
**A:** 
- 是的，所有对话都会保存
- 可以随时查看历史记录
- 点击"清除历史"可以删除所有记录

---

## 快捷键

- **Enter** - 发送消息
- **Shift+Enter** - 换行

---

## 高级技巧

### 技巧1：组合使用快捷指令
```
第1次：选中文字 → 点击"扩写" → 增加内容
第2次：选中扩写后的文字 → 点击"润色" → 优化表达
```

### 技巧2：渐进式修改
```
第1次：粗略修改，确定方向
第2次：细节优化，完善表达
第3次：最终润色，达到完美
```

### 技巧3：利用上下文
```
选中关键句子，AI会理解前后文
修改时会保持整体连贯性
```

### 技巧4：明确修改目标
```
不好的指令："改一下"
好的指令："改成数据驱动的表达，添加具体数字"
```

---

## 反馈与建议

如果你在使用过程中遇到问题或有改进建议，请：
1. 记录问题的详细情况
2. 截图保存错误信息
3. 联系技术支持团队

---

**祝你使用愉快！** 🎉

## 更新日志

**v1.0** (2024-12-26)
- ✅ 选中文字自动引用
- ✅ 快捷指令（润色、简化、扩写、改写）
- ✅ AI对话修改
- ✅ 上下文理解
- ✅ 对话历史保存
