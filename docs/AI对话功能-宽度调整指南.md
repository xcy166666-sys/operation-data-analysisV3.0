# AI对话功能 - 宽度调整指南

## 功能概述

系统支持灵活调整三个区域的宽度比例：
1. **历史会话栏**（左侧）
2. **AI对话面板**（中间）
3. **报告展示区域**（右侧，自适应）

## 调整方法

### 1. 调整历史会话栏宽度

**位置**：历史会话栏的右侧边缘

**操作步骤**：
1. 将鼠标移动到历史会话栏的右侧边缘
2. 光标会变成 `↔` 形状
3. 按住鼠标左键
4. 左右拖动调整宽度
5. 松开鼠标完成调整

**宽度范围**：
- 最小：200px
- 默认：280px
- 最大：400px

**视觉提示**：
- 悬停时：边缘显示半透明高亮
- 拖拽时：显示当前宽度数值

### 2. 调整对话面板宽度

**位置**：对话面板和报告展示区域之间的分隔条

**操作步骤**：
1. 将鼠标移动到对话面板右侧的灰色分隔条
2. 光标会变成 `↔` 形状
3. 按住鼠标左键
4. 左右拖动调整宽度
5. 松开鼠标完成调整

**宽度范围**：
- 最小：300px
- 默认：450px
- 最大：800px

**视觉提示**：
- 悬停时：分隔条变深色
- 拖拽时：显示当前宽度数值（如"450px"）

### 3. 报告展示区域

**特点**：
- 自动适应剩余空间
- 不需要手动调整
- 宽度 = 总宽度 - 历史会话栏宽度 - 对话面板宽度 - 分隔条宽度

## 使用场景

### 场景1：专注对话

**需求**：需要更大的对话空间

**调整方案**：
1. 缩小历史会话栏：200px
2. 扩大对话面板：600px
3. 报告区域自适应

**效果**：
- 对话历史显示更多内容
- 输入区域更宽敞
- 适合长时间对话

### 场景2：专注报告

**需求**：需要更大的报告查看空间

**调整方案**：
1. 缩小历史会话栏：200px
2. 缩小对话面板：300px
3. 报告区域自适应（最大化）

**效果**：
- 报告内容显示更完整
- 图表展示更清晰
- 适合查看复杂报告

### 场景3：平衡模式

**需求**：平衡对话和报告的显示

**调整方案**：
1. 历史会话栏：280px（默认）
2. 对话面板：450px（默认）
3. 报告区域自适应

**效果**：
- 三个区域比例适中
- 适合大多数使用场景

### 场景4：大屏幕优化

**需求**：充分利用大屏幕空间

**调整方案**：
1. 历史会话栏：350px
2. 对话面板：600px
3. 报告区域自适应（宽敞）

**效果**：
- 所有区域都有充足空间
- 适合2K/4K显示器

## 快捷操作

### 双击重置

**功能**：双击分隔条恢复默认宽度

**实现**：（待开发）
- 双击历史会话栏分隔条 → 恢复280px
- 双击对话面板分隔条 → 恢复450px

### 预设布局

**功能**：快速切换预设的布局方案

**实现**：（待开发）
- 布局1：专注对话（200/600/自适应）
- 布局2：专注报告（200/300/自适应）
- 布局3：平衡模式（280/450/自适应）
- 布局4：大屏优化（350/600/自适应）

### 保存偏好

**功能**：记住用户的宽度偏好

**实现**：（待开发）
- 使用localStorage保存宽度设置
- 下次打开自动恢复上次的宽度

## 技术细节

### 拖拽实现

```typescript
// 历史会话栏宽度调整
const sidebarWidth = ref(280) // 默认280px
const isSidebarResizing = ref(false)

const startSidebarResize = (e: MouseEvent) => {
  isSidebarResizing.value = true
  // 记录起始位置和宽度
  sidebarStartX.value = e.clientX
  sidebarStartWidth.value = sidebarWidth.value
  
  // 添加事件监听
  document.addEventListener('mousemove', handleSidebarResize)
  document.addEventListener('mouseup', stopSidebarResize)
}

const handleSidebarResize = (e: MouseEvent) => {
  if (!isSidebarResizing.value) return
  
  const deltaX = e.clientX - sidebarStartX.value
  const newWidth = sidebarStartWidth.value + deltaX
  
  // 限制宽度范围
  if (newWidth >= 200 && newWidth <= 400) {
    sidebarWidth.value = newWidth
  }
}
```

### 样式实现

```css
/* 历史会话栏容器 */
.sidebar-container {
  width: var(--sidebar-width); /* 动态宽度 */
  position: relative;
}

/* 拖拽分隔条 */
.sidebar-resize-handle {
  width: 4px;
  cursor: col-resize;
  position: absolute;
  right: 0;
}

/* 悬停效果 */
.sidebar-resize-handle:hover {
  background: rgba(255, 255, 255, 0.1);
}
```

### 宽度计算

```typescript
// 对话面板宽度：动态设置
:style="{ width: dialogPanelWidth + 'px' }"

// 报告区域宽度：自动计算
:style="{ width: `calc(100% - ${dialogPanelWidth}px - 8px)` }"
```

## 注意事项

### 1. 最小宽度限制

**原因**：确保内容可读性

**限制**：
- 历史会话栏：最小200px
- 对话面板：最小300px
- 报告区域：自动适应（建议最小600px）

### 2. 最大宽度限制

**原因**：避免单个区域占用过多空间

**限制**：
- 历史会话栏：最大400px
- 对话面板：最大800px
- 报告区域：无限制（自适应）

### 3. 响应式适配

**小屏幕（<1366px）**：
- 建议缩小历史会话栏和对话面板
- 给报告区域留出更多空间

**中等屏幕（1366-1920px）**：
- 使用默认宽度即可
- 根据需要微调

**大屏幕（>1920px）**：
- 可以适当增加各区域宽度
- 充分利用屏幕空间

### 4. 性能考虑

**拖拽优化**：
- 使用节流（throttle）减少重绘
- 拖拽时禁用文本选择
- 拖拽结束后移除事件监听

**内存管理**：
- 及时清理事件监听器
- 避免内存泄漏

## 常见问题

### Q1: 拖拽时卡顿怎么办？

**原因**：浏览器性能不足或内容过多

**解决方案**：
1. 关闭其他标签页
2. 清理浏览器缓存
3. 使用性能更好的浏览器（Chrome/Edge）

### Q2: 宽度调整后刷新页面会恢复吗？

**当前**：是的，刷新后会恢复默认宽度

**未来**：将支持保存宽度偏好到localStorage

### Q3: 能否通过键盘调整宽度？

**当前**：不支持

**未来**：计划支持快捷键调整
- `Ctrl + [` - 缩小对话面板
- `Ctrl + ]` - 扩大对话面板

### Q4: 移动端支持宽度调整吗？

**当前**：不支持（移动端使用固定布局）

**未来**：可能支持触摸拖拽

## 后续优化

### 短期（1-2周）

- [ ] 双击分隔条恢复默认宽度
- [ ] 保存宽度偏好到localStorage
- [ ] 添加拖拽节流优化

### 中期（1个月）

- [ ] 预设布局快速切换
- [ ] 键盘快捷键调整
- [ ] 拖拽动画优化

### 长期（3个月）

- [ ] 移动端触摸拖拽支持
- [ ] 多显示器适配
- [ ] 布局模板保存和分享

## 反馈

如有任何问题或建议，请联系开发团队。
