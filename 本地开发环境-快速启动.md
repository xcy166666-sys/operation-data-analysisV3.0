# æœ¬åœ°å¼€å‘ç¯å¢ƒ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬é¡¹ç›®åœ¨å¼€å‘ç¯å¢ƒä¸­é‡‡ç”¨**æ··åˆæ¨¡å¼**ï¼š
- âœ… å‰ç«¯ï¼šæœ¬åœ°è¿è¡Œï¼ˆnpm run devï¼‰
- âœ… åç«¯ï¼šæœ¬åœ°è¿è¡Œï¼ˆPython uvicornï¼‰
- âœ… æ•°æ®åº“ï¼šDocker å®¹å™¨
- âœ… Redisï¼šDocker å®¹å™¨

è¿™ç§æ–¹å¼é¿å…äº† Docker ç½‘ç»œé—®é¢˜ï¼Œæä¾›æ›´å¿«çš„å¼€å‘ä½“éªŒã€‚

## ğŸ“‹ å‰ç½®æ¡ä»¶

### å¿…éœ€è½¯ä»¶
- âœ… Python 3.11+ 
- âœ… Node.js 16+
- âœ… Docker Desktop
- âœ… Git

### æ£€æŸ¥å®‰è£…
```powershell
python --version    # åº”æ˜¾ç¤º 3.11 æˆ–æ›´é«˜
node --version      # åº”æ˜¾ç¤º 16 æˆ–æ›´é«˜
docker --version    # åº”æ˜¾ç¤º Docker ç‰ˆæœ¬
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ3 æ­¥ï¼‰

### æ­¥éª¤ 1: å¯åŠ¨æ•°æ®åº“å’Œ Redis

```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•
docker-compose up -d postgres redis
```

éªŒè¯å¯åŠ¨æˆåŠŸï¼š
```powershell
docker ps | findstr postgres
docker ps | findstr redis
```

### æ­¥éª¤ 2: å¯åŠ¨åç«¯æœåŠ¡

```powershell
# æ–¹å¼ 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
cd backend
.\start_local.bat

# æ–¹å¼ 2: æ‰‹åŠ¨å¯åŠ¨
cd backend
pip install -r requirements.txt  # é¦–æ¬¡è¿è¡Œéœ€è¦
$env:ENV_FILE=".env.local"
python -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Application startup complete.
```

**é¦–æ¬¡è¿è¡Œéœ€è¦é‡ç½®ç®¡ç†å‘˜å¯†ç **ï¼š

å¦‚æœç™»å½•å¤±è´¥ï¼Œåœ¨æ–°ç»ˆç«¯è¿è¡Œï¼š
```powershell
cd backend
python reset_admin_password.py
```

è¿™å°†é‡ç½®ç®¡ç†å‘˜å¯†ç ä¸º `admin123!`

### æ­¥éª¤ 3: å¯åŠ¨å‰ç«¯æœåŠ¡

**æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£**ï¼š

```powershell
cd frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦
npm run dev
```

çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
VITE v5.x.x  ready in xxx ms
âœ  Local:   http://localhost:5173/
```

## ğŸŒ è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯åº”ç”¨ | http://localhost:5173 | Vue 3 å‰ç«¯ |
| åç«¯ API | http://localhost:8000 | FastAPI åç«¯ |
| API æ–‡æ¡£ | http://localhost:8000/docs | Swagger UI |
| PostgreSQL | localhost:22810 | æ•°æ®åº“ |
| Redis | localhost:22811 | ç¼“å­˜ |

## âœ… éªŒè¯å®‰è£…

### 1. æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
```powershell
curl http://localhost:8000/api/v1/health
```

åº”è¿”å›ï¼š
```json
{"status": "ok"}
```

### 2. æ£€æŸ¥å‰ç«¯æ˜¯å¦èƒ½è®¿é—®åç«¯

æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç™»å½•é¡µé¢ã€‚

### 3. æµ‹è¯•å®Œæ•´æµç¨‹

1. ç™»å½•ç³»ç»Ÿï¼ˆé»˜è®¤è´¦å·ï¼šadmin / admin123!ï¼‰
2. ä¸Šä¼  Excel æ–‡ä»¶
3. ç”ŸæˆæŠ¥å‘Š

å¦‚æœèƒ½æˆåŠŸç”ŸæˆæŠ¥å‘Šï¼Œè¯´æ˜ç¯å¢ƒé…ç½®æ­£ç¡®ï¼

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: åç«¯å¯åŠ¨å¤±è´¥ - ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: [Errno 10048] error while attempting to bind on address ('0.0.0.0', 8000)
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```powershell
# æŸ¥æ‰¾å ç”¨ 8000 ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8000

# ç»“æŸè¿›ç¨‹ï¼ˆæ›¿æ¢ PID ä¸ºå®é™…è¿›ç¨‹ IDï¼‰
taskkill /PID <PID> /F

# æˆ–è€…ä¿®æ”¹ç«¯å£
python -m uvicorn main:app --host 0.0.0.0 --port 8001 --reload
```

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
psycopg2.OperationalError: connection to server at "localhost", port 22810 failed
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```powershell
# æ£€æŸ¥ PostgreSQL å®¹å™¨æ˜¯å¦è¿è¡Œ
docker ps | findstr postgres

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨å®ƒ
docker-compose up -d postgres

# æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
# ç¼–è¾‘ backend/.env.localï¼Œç¡®ä¿ POSTGRES_PASSWORD ä¸å®¹å™¨ä¸­çš„ä¸€è‡´
```

### Q3: Redis è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
redis.exceptions.ConnectionError: Error connecting to Redis
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```powershell
# æ£€æŸ¥ Redis å®¹å™¨æ˜¯å¦è¿è¡Œ
docker ps | findstr redis

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨å®ƒ
docker-compose up -d redis
```

### Q4: å‰ç«¯æ— æ³•è®¿é—®åç«¯ API

**é”™è¯¯ä¿¡æ¯**ï¼šæµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º CORS é”™è¯¯æˆ– Network Error

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤åç«¯æ­£åœ¨è¿è¡Œï¼šhttp://localhost:8000/docs
2. æ£€æŸ¥å‰ç«¯é…ç½®ï¼š`frontend/.env.development` ä¸­çš„ `VITE_API_URL` åº”è¯¥æ˜¯ `http://localhost:8000`
3. é‡å¯å‰ç«¯æœåŠ¡

### Q5: ç”ŸæˆæŠ¥å‘Šæ—¶å‡ºç° 500 é”™è¯¯

**å¯èƒ½åŸå› **ï¼š
1. é˜¿é‡Œäº‘ API Key æœªé…ç½®æˆ–æ— æ•ˆ
2. ç½‘ç»œæ— æ³•è®¿é—®é˜¿é‡Œäº‘ API

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `backend/.env.local` ä¸­çš„ `DASHSCOPE_API_KEY`
2. æµ‹è¯•ç½‘ç»œè¿æ¥ï¼š
   ```powershell
   cd backend
   python test_dashscope_api.py
   ```

## ğŸ”„ åˆ‡æ¢åˆ° Docker æ¨¡å¼

å¦‚æœéœ€è¦æµ‹è¯•å®Œæ•´çš„ Docker ç¯å¢ƒï¼š

```powershell
# 1. åœæ­¢æœ¬åœ°åç«¯æœåŠ¡ï¼ˆåœ¨åç«¯ç»ˆç«¯æŒ‰ Ctrl+Cï¼‰

# 2. æ›´æ–°å‰ç«¯é…ç½®
# ç¼–è¾‘ frontend/.env.development
# å°† VITE_API_URL æ”¹ä¸º http://localhost:21810

# 3. å¯åŠ¨ Docker åç«¯
docker-compose up -d backend

# 4. é‡å¯å‰ç«¯ï¼ˆåœ¨å‰ç«¯ç»ˆç«¯æŒ‰ Ctrl+C åé‡æ–°è¿è¡Œï¼‰
npm run dev
```

## ğŸ“ å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘

1. **å¯åŠ¨æœåŠ¡**ï¼ˆæ¯å¤©ç¬¬ä¸€æ¬¡ï¼‰ï¼š
   ```powershell
   # ç»ˆç«¯ 1: åç«¯
   cd backend
   .\start_local.bat
   
   # ç»ˆç«¯ 2: å‰ç«¯
   cd frontend
   npm run dev
   ```

2. **å¼€å‘ä»£ç **ï¼š
   - åç«¯ä»£ç ä¿®æ”¹åè‡ªåŠ¨é‡è½½ï¼ˆuvicorn --reloadï¼‰
   - å‰ç«¯ä»£ç ä¿®æ”¹åè‡ªåŠ¨çƒ­æ›´æ–°ï¼ˆVite HMRï¼‰

3. **åœæ­¢æœåŠ¡**ï¼š
   - åœ¨å„ä¸ªç»ˆç«¯æŒ‰ `Ctrl+C`

### æ•°æ®åº“æ“ä½œ

```powershell
# è¿æ¥åˆ°æ•°æ®åº“
docker exec -it operation-analysis-v2-postgres psql -U postgres -d operation_analysis_v2

# æŸ¥çœ‹è¡¨
\dt

# é€€å‡º
\q
```

### æŸ¥çœ‹æ—¥å¿—

```powershell
# åç«¯æ—¥å¿—ï¼šç›´æ¥åœ¨ç»ˆç«¯æŸ¥çœ‹

# æ•°æ®åº“æ—¥å¿—
docker logs operation-analysis-v2-postgres

# Redis æ—¥å¿—
docker logs operation-analysis-v2-redis
```

## ğŸ“ å­¦ä¹ èµ„æº

- FastAPI æ–‡æ¡£: https://fastapi.tiangolo.com/
- Vue 3 æ–‡æ¡£: https://vuejs.org/
- Docker æ–‡æ¡£: https://docs.docker.com/

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
2. æŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„å…¶ä»–æ–‡æ¡£
3. æ£€æŸ¥åç«¯å’Œå‰ç«¯çš„æ§åˆ¶å°è¾“å‡º

---

**ç¥å¼€å‘æ„‰å¿«ï¼** ğŸ‰
