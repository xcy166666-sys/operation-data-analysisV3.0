# 快速启动指南

> **📢 重要更新**：项目现在支持本地开发环境！推荐使用本地模式进行开发。
> 
> 👉 **查看详细指南**：[本地开发环境-快速启动.md](./本地开发环境-快速启动.md)

## 🚀 快速启动（推荐：本地开发模式）

### 方式 1: 本地开发模式（推荐）⭐

**优势**：更快、更稳定、更易调试

```powershell
# 1. 启动数据库和 Redis
docker-compose up -d postgres redis

# 2. 启动后端（新终端）
cd backend
.\start_local.bat

# 3. 启动前端（新终端）
cd frontend
npm run dev
```

**访问地址**：
- 前端：http://localhost:5173
- 后端 API：http://localhost:8000
- API 文档：http://localhost:8000/docs

### 方式 2: 完整 Docker 模式

**适用场景**：生产环境或测试完整部署

```powershell
# 启动所有服务
docker-compose up -d

# 前端需要单独启动
cd frontend
npm run dev
```

**访问地址**：
- 前端：http://localhost:5173
- 后端 API：http://localhost:21810
- API 文档：http://localhost:21810/docs

---

## ✅ 项目已成功启动！

### 当前运行状态（本地开发模式）

#### 后端服务（本地）
- ✅ **状态**：运行中
- 🔗 **API地址**：http://localhost:8000
- 📚 **API文档**：http://localhost:8000/docs
- 🏥 **健康检查**：http://localhost:8000/health

#### 前端服务（本地）
- ✅ **状态**：运行中
- 🔗 **访问地址**：http://localhost:5173

#### 数据库服务（Docker）
- ✅ **PostgreSQL**：localhost:22810
- ✅ **Redis**：localhost:22811

---

## 🎯 测试保存版本功能

### 步骤1：访问系统
打开浏览器访问：http://localhost:5173

### 步骤2：登录
使用你的账号登录系统

### 步骤3：生成报告
1. 点击"游戏运营数据分析助手"
2. 上传Excel文件
3. 输入分析需求
4. 点击"提交生成报告"
5. 等待报告生成完成

### 步骤4：保存版本 ⭐
1. **查看按钮**：报告生成后，右上角会显示黄色的"保存版本"按钮
2. **点击保存**：
   - 点击"保存版本"按钮
   - 弹出输入框
   - 输入版本说明，例如："初始版本"
   - 点击"保存"
3. **验证结果**：
   - 应该显示："版本 V1 已保存"
   - 按钮仍然可用

### 步骤5：查看版本历史
1. 在左侧历史会话列表中找到该会话
2. 点击会话右侧的 📄 图标
3. 版本列表展开，显示已保存的版本
4. 点击任意版本可以查看该版本的内容

---

## 🔧 管理命令

### 启动项目
```bash
# 方法1：使用启动脚本（推荐）
启动项目.bat

# 方法2：手动启动
docker-compose up -d
cd frontend
npm run dev
```

### 停止项目
```bash
# 方法1：使用停止脚本（推荐）
停止项目.bat

# 方法2：手动停止
docker-compose down
# 然后关闭前端服务窗口（Ctrl+C）
```

### 查看日志
```bash
# 后端日志
docker-compose logs backend --tail=50 -f

# 前端日志
# 查看前端服务窗口的输出
```

### 重启服务
```bash
# 重启后端
docker-compose restart backend

# 重启前端
# 在前端服务窗口按 Ctrl+C，然后重新运行 npm run dev
```

---

## 📊 服务端口

| 服务 | 端口 | 说明 |
|------|------|------|
| 前端 | 5173 | Vue开发服务器 |
| 后端 | 21810 | FastAPI服务 |
| PostgreSQL | 22810 | 数据库 |
| Redis | 22811 | 缓存 |

---

## 🐛 常见问题

### Q1: 前端无法访问？
**检查**：
1. 前端服务是否正在运行？
2. 端口5173是否被占用？
3. 浏览器控制台是否有错误？

**解决**：
```bash
# 重启前端
cd frontend
npm run dev
```

### Q2: 后端API报错？
**检查**：
1. Docker容器是否运行？`docker-compose ps`
2. 查看后端日志：`docker-compose logs backend --tail=50`

**解决**：
```bash
# 重启后端
docker-compose restart backend
```

### Q3: 保存版本按钮不显示？
**检查**：
1. 是否已经生成了报告？
2. 刷新页面（Ctrl+Shift+R）
3. 查看浏览器控制台是否有错误

### Q4: 数据库连接失败？
**检查**：
1. PostgreSQL容器是否健康？`docker-compose ps`
2. 数据库是否已创建？

**解决**：
```bash
# 重启数据库
docker-compose restart postgres
```

---

## 📝 功能特点

### 保存版本功能
- ✅ 随时保存当前报告状态
- ✅ 自动生成版本号（V1, V2, V3...）
- ✅ 可输入版本说明
- ✅ 保存完整的报告内容（文本+图表）
- ✅ 查看版本历史
- ✅ 切换到任意历史版本

### 按钮位置
```
[返回首页] [批量分析] [定制化批量分析] [保存版本] [AI对话]
                                        ↑
                                    黄色按钮
```

---

## 📚 相关文档

- `保存版本功能-快速测试.md` - 详细测试指南
- `报告版本历史功能-快速开始.md` - 版本历史功能说明
- `报告版本历史功能-问题诊断与修复.md` - 问题排查指南

---

## 🎉 开始使用

现在你可以：
1. 访问 http://localhost:5173
2. 登录系统
3. 生成报告
4. 点击"保存版本"按钮测试新功能

祝使用愉快！🚀
